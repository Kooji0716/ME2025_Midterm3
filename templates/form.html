{% extends 'index.html' %}

{% block form %}
<form id="order-form" method="POST" action="/product">
    <!-- 客戶名稱 -->
    <div class="form-row">
        <label for="customer">客戶名稱：</label>
        <input type="text" id="customer" name="customer" required>
    </div>

    <!-- 備註 -->
    <div class="form-row">
        <label for="note">備註：</label>
        <input type="text" id="note" name="note">
    </div>

    <!-- 日期：預設今天（由 JS 幫你填） -->
    <div class="form-row">
        <label for="date">日期：</label>
        <input type="date" id="date" name="date" required>
    </div>

    <!-- 商品種類 (Category) -->
    <div class="form-row">
        <label for="category">商品種類：</label>
        <select id="category" name="category" onchange="selectCategory()" required>
            <!-- 選項可由後端 render，或先寫死幾個 -->
            <option value="">請選擇商品種類</option>
            <option value="飲料">飲料</option>
            <option value="點心">點心</option>
            <option value="其他">其他</option>
        </select>
    </div>

    <!-- 商品名稱：會依種類由 JS 更新 -->
    <div class="form-row">
        <label for="product">商品名稱：</label>
        <select id="product" name="product" onchange="selectProduct()" required>
            <option value="">請先選擇商品種類</option>
        </select>
    </div>

    <!-- 數量：必須 > 0，預設 1（可以用 JS 或這裡 value="1"） -->
    <div class="form-row">
        <label for="quantity">數量：</label>
        <input
            type="number"
            id="quantity"
            name="quantity"
            min="1"
            value="1"
            required
            oninput="countTotal()"
        >
    </div>

    <!-- 單價：由 selectProduct() 透過 Fetch API 更新 -->
    <div class="form-row">
        <label for="price">單價：</label>
        <input
            type="number"
            id="price"
            name="price"
            readonly
            oninput="countTotal()"
        >
    </div>

    <!-- 狀態：下拉選單，預設「未付款」 -->
    <div class="form-row">
        <label for="status">狀態：</label>
        <select id="status" name="status">
            <option value="未付款" selected>未付款</option>
            <option value="已付款">已付款</option>
            <option value="已完成">已完成</option>
        </select>
    </div>

    <!-- 小計：單價 × 數量，自動計算 -->
    <div class="form-row">
        <label for="total">小計：</label>
        <input
            type="number"
            id="total"
            name="total"
            readonly
        >
    </div>

    <!-- 送出按鈕：可以用原生 submit 或之後改成 JS fetch -->
    <div class="form-row">
        <button type="submit">送出</button>
    </div>
</form>
{% endblock %}
